<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Location Sharing</title>

<style>
body{
    font-family: Arial, Helvetica, sans-serif;
    text-align:center;
    background:#f5f5f5;
    margin-top:60px;
}

button{
    padding:15px 30px;
    font-size:18px;
    cursor:pointer;
    border:none;
    background:#007bff;
    color:white;
    border-radius:6px;
}

button:hover{
    background:#0056b3;
}

#status{
    margin-top:20px;
    font-size:16px;
}
</style>
</head>

<body>

<h2>Share Your Location</h2>

<button onclick="startTracking()">Start Sharing</button>

<p id="status">Waiting for user action...</p>

<script>

let watchID = null;

// ðŸ”´ CHANGE THIS
const SERVER_URL = "http://YOUR_LAPTOP_IP/location/save_location.php";

function startTracking(){

    document.getElementById("status").innerHTML =
        "Requesting GPS permission...";

    if(!navigator.geolocation){
        document.getElementById("status").innerHTML =
            "Geolocation not supported on this device";
        return;
    }

    watchID = navigator.geolocation.watchPosition(

        function(position){

            let lat = position.coords.latitude;
            let lon = position.coords.longitude;
            let acc = position.coords.accuracy;

            document.getElementById("status").innerHTML =
                "Sharing location âœ”<br><br>" +
                "Latitude: "+lat+"<br>" +
                "Longitude: "+lon+"<br>" +
                "Accuracy: "+acc+" meters";

            // Send to your server
            fetch(SERVER_URL,{
                method:"POST",
                headers:{
                    "Content-Type":"application/json"
                },
                body: JSON.stringify({
                    lat:lat,
                    lon:lon
                })
            });

        },

        function(error){

            let msg="";

            switch(error.code){
                case error.PERMISSION_DENIED:
                    msg="Permission denied by user";
                    break;

                case error.POSITION_UNAVAILABLE:
                    msg="Position unavailable";
                    break;

                case error.TIMEOUT:
                    msg="Location request timeout";
                    break;

                default:
                    msg="Unknown error occurred";
            }

            document.getElementById("status").innerHTML = msg;
        },

        {
            enableHighAccuracy:true,
            maximumAge:0,
            timeout:5000
        }
    );
}

</script>

</body>
</html>
